<h1>Listing posts</h1>

<table>
  <tr>
    <th>Points</th>
    <th>Title</th>
    <th></th>
    <th></th>
  </tr>

<% @posts.each do |post| %>
  <tr>
    <td><%= post.points %></td>
    <td>
      <% if current_target %>
      <% unless post.already_voted?(current_target) || post.created_by?(current_target) %>
      <%= link_to "UP", post_votes_path(post, :positive => true), :method => :post %>
      <% end %>
      <% end %>

      <%= link_to post.title, post %> <% if !post.url.blank? %>(<%= post.url %>)<% end %> [<%= post.poster %>]
    <% if post.posted_by?(current_target) %>
      <% if post.editable? %>
      <td><%= link_to 'Edit', edit_post_path(post) %></td>
      <% end %>
    <td><%= link_to 'Destroy', post, confirm: 'Are you sure?', method: :delete %></td>
    <% end %>
  </tr>
<% end %>
</table>

<br />

<%= link_to 'Submit', new_post_path %>
